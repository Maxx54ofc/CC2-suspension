local Players = game:GetService("Players")
local player = Players.LocalPlayer
local playerGui = player:FindFirstChildOfClass("PlayerGui")
local workspace = game:GetService("Workspace")

-- Criar ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Parent = playerGui

-- Criar Botão Principal
local mainButton = Instance.new("TextButton")
mainButton.Size = UDim2.new(0, 45, 0, 45)
mainButton.Position = UDim2.new(0.1, 0, 0.1, 0)
mainButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
mainButton.Text = "+"
mainButton.TextScaled = true
mainButton.Parent = screenGui
mainButton.Draggable = true
mainButton.Active = true
mainButton.Selectable = true

local mainButtonCorner = Instance.new("UICorner")
mainButtonCorner.CornerRadius = UDim.new(0, 12)
mainButtonCorner.Parent = mainButton

-- Criar Frame da Interface com Scrolling
local uiFrame = Instance.new("Frame")
uiFrame.Size = UDim2.new(0, 450, 0, 400)
uiFrame.Position = UDim2.new(0.1, 50, 0.1, 0)
uiFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
uiFrame.Visible = false
uiFrame.Active = true
uiFrame.Draggable = true
uiFrame.Parent = screenGui

local uiFrameCorner = Instance.new("UICorner")
uiFrameCorner.CornerRadius = UDim.new(0, 16)
uiFrameCorner.Parent = uiFrame

-- Adicionar ScrollingFrame
local scrollingFrame = Instance.new("ScrollingFrame")
scrollingFrame.Size = UDim2.new(1, -20, 1, -60)
scrollingFrame.Position = UDim2.new(0, 10, 0, 50)
scrollingFrame.BackgroundTransparency = 1
scrollingFrame.ScrollBarThickness = 8
scrollingFrame.CanvasSize = UDim2.new(0, 0, 0, 600) -- Ajuste conforme necessário
scrollingFrame.Parent = uiFrame

-- Título da interface
local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(1, 0, 0, 40)
titleLabel.Position = UDim2.new(0, 0, 0, 0)
titleLabel.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
titleLabel.Text = "Suspension Adjustments"
titleLabel.TextColor3 = Color3.fromRGB(127, 127, 127)
titleLabel.TextScaled = true
titleLabel.Parent = uiFrame

-- Função para criar elementos de UI
local function createLabel(text, size, pos, parent)
    local label = Instance.new("TextLabel")
    label.Size = size
    label.Position = pos
    label.BackgroundTransparency = 1
    label.Text = text
    label.TextColor3 = Color3.fromRGB(255, 255, 255)
    label.TextScaled = true
    label.Parent = parent
    return label
end

local function createTextBox(size, pos, parent)
    local textBox = Instance.new("TextBox")
    textBox.Size = size
    textBox.Position = pos
    textBox.BackgroundColor3 = Color3.fromRGB(90, 90, 90)
    textBox.TextColor3 = Color3.fromRGB(255, 255, 255)
    textBox.ClearTextOnFocus = false
    textBox.Text = ""
    textBox.TextScaled = true
    textBox.Parent = parent
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 8)
    corner.Parent = textBox
    return textBox
end

-- Elementos existentes
createLabel("Front", UDim2.new(0, 150, 0, 30), UDim2.new(0, 30, 0, 10), scrollingFrame)
createLabel("Rear", UDim2.new(0, 150, 0, 30), UDim2.new(0, 250, 0, 10), scrollingFrame)

createLabel("Camber:", UDim2.new(0, 60, 0, 35), UDim2.new(0, 30, 0, 50), scrollingFrame)
local frontCamberTextBox = createTextBox(UDim2.new(0, 90, 0, 35), UDim2.new(0, 100, 0, 50), scrollingFrame)

createLabel("Camber:", UDim2.new(0, 60, 0, 35), UDim2.new(0, 250, 0, 50), scrollingFrame)
local rearCamberTextBox = createTextBox(UDim2.new(0, 90, 0, 35), UDim2.new(0, 320, 0, 50), scrollingFrame)

createLabel("Height:", UDim2.new(0, 60, 0, 35), UDim2.new(0, 30, 0, 100), scrollingFrame)
local frontFreeLengthTextBox = createTextBox(UDim2.new(0, 90, 0, 35), UDim2.new(0, 100, 0, 100), scrollingFrame)

createLabel("Height:", UDim2.new(0, 60, 0, 35), UDim2.new(0, 250, 0, 100), scrollingFrame)
local rearFreeLengthTextBox = createTextBox(UDim2.new(0, 90, 0, 35), UDim2.new(0, 320, 0, 100), scrollingFrame)

-- Controles LowRider
createLabel("LowRider Settings", UDim2.new(0, 150, 0, 30), UDim2.new(0, 30, 0, 300), scrollingFrame)

createLabel("Speed:", UDim2.new(0, 60, 0, 35), UDim2.new(0, 30, 0, 340), scrollingFrame)
local lowRiderSpeedTextBox = createTextBox(UDim2.new(0, 90, 0, 35), UDim2.new(0, 100, 0, 340), scrollingFrame)
lowRiderSpeedTextBox.Text = "0.3"

createLabel("Min Height:", UDim2.new(0, 60, 0, 35), UDim2.new(0, 30, 0, 390), scrollingFrame)
local lowRiderMinTextBox = createTextBox(UDim2.new(0, 90, 0, 35), UDim2.new(0, 100, 0, 390), scrollingFrame)
lowRiderMinTextBox.Text = "0.8"

createLabel("Max Height:", UDim2.new(0, 60, 0, 35), UDim2.new(0, 30, 0, 440), scrollingFrame)
local lowRiderMaxTextBox = createTextBox(UDim2.new(0, 90, 0, 35), UDim2.new(0, 100, 0, 440), scrollingFrame)
lowRiderMaxTextBox.Text = "10"

-- Botões
local applyButton = Instance.new("TextButton")
applyButton.Size = UDim2.new(0, 70, 0, 40)
applyButton.Position = UDim2.new(1, -90, 1, -50)
applyButton.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
applyButton.Text = "Apply"
applyButton.TextColor3 = Color3.fromRGB(255, 255, 255)
applyButton.TextScaled = true
applyButton.Parent = uiFrame

local applyButtonCorner = Instance.new("UICorner")
applyButtonCorner.CornerRadius = UDim.new(0, 10)
applyButtonCorner.Parent = applyButton

local lowRiderButton = Instance.new("TextButton")
lowRiderButton.Size = UDim2.new(0, 90, 0, 40)
lowRiderButton.Position = UDim2.new(1, -190, 1, -50)
lowRiderButton.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
lowRiderButton.Text = "LowRider: OFF"
lowRiderButton.TextColor3 = Color3.fromRGB(255, 255, 255)
lowRiderButton.TextScaled = true
lowRiderButton.Parent = uiFrame

local lowRiderButtonCorner = Instance.new("UICorner")
lowRiderButtonCorner.CornerRadius = UDim.new(0, 10)
lowRiderButtonCorner.Parent = lowRiderButton

-- Variáveis
local lowRiderActive = false

-- Função LowRider atualizada
local function lowRiderEffect()
    while lowRiderActive do
        local speed = tonumber(lowRiderSpeedTextBox.Text) or 0.3
        local minHeight = tonumber(lowRiderMinTextBox.Text) or 0.8
        local maxHeight = tonumber(lowRiderMaxTextBox.Text) or 10
        
        local carCollection = workspace:FindFirstChild("CarCollection")
        if carCollection then
            local playerCar = carCollection:FindFirstChild(player.Name)
            if playerCar then
                local car = playerCar:FindFirstChild("Car")
                if car then
                    local wheels = car:FindFirstChild("Wheels")
                    if wheels then
                        local frontWheels = {"FR", "FL"}
                        -- Abaixar
                        for _, wheelName in pairs(frontWheels) do
                            local wheel = wheels:FindFirstChild(wheelName)
                            if wheel then
                                local spring = wheel:FindFirstChild("Spring")
                                if spring then
                                    spring.FreeLength = minHeight
                                end
                            end
                        end
                        wait(speed)
                        -- Subir
                        for _, wheelName in pairs(frontWheels) do
                            local wheel = wheels:FindFirstChild(wheelName)
                            if wheel then
                                local spring = wheel:FindFirstChild("Spring")
                                if spring then
                                    spring.FreeLength = maxHeight
                                end
                            end
                        end
                        wait(speed)
                    end
                end
            end
        end
    end
end

-- Funções existentes
mainButton.MouseButton1Click:Connect(function()
    uiFrame.Visible = not uiFrame.Visible
    mainButton.Text = uiFrame.Visible and "-" or "+"
end)

local function applyCambers()
    local frontCamber = tonumber(frontCamberTextBox.Text) or 0
    local rearCamber = tonumber(rearCamberTextBox.Text) or 0
    local carCollection = workspace:FindFirstChild("CarCollection")
    if carCollection then
        local playerCar = carCollection:FindFirstChild(player.Name)
        if playerCar then
            local car = playerCar:FindFirstChild("Car")
            if car then
                local wheels = car:FindFirstChild("Wheels")
                if wheels then
                    local frontWheels = {"FR", "FL"}
                    local rearWheels = {"RL", "RR"}
                    for _, wheelName in pairs(frontWheels) do
                        local wheel = wheels:FindFirstChild(wheelName)
                        if wheel then
                            local constraint = wheel:FindFirstChild("CylindricalConstraint")
                            if constraint then
                                constraint.InclinationAngle = frontCamber
                            end
                        end
                    end
                    for _, wheelName in pairs(rearWheels) do
                        local wheel = wheels:FindFirstChild(wheelName)
                        if wheel then
                            local constraint = wheel:FindFirstChild("CylindricalConstraint")
                            if constraint then
                                constraint.InclinationAngle = rearCamber
                            end
                        end
                    end
                end
            end
        end
    end
end

local function applyFreeLengths()
    local frontFreeLength = tonumber(frontFreeLengthTextBox.Text) or 0
    local rearFreeLength = tonumber(rearFreeLengthTextBox.Text) or 0
    local carCollection = workspace:FindFirstChild("CarCollection")
    if carCollection then
        local playerCar = carCollection:FindFirstChild(player.Name)
        if playerCar then
            local car = playerCar:FindFirstChild("Car")
            if car then
                local wheels = car:FindFirstChild("Wheels")
                if wheels then
                    local frontWheels = {"FR", "FL"}
                    local rearWheels = {"RL", "RR"}
                    for _, wheelName in pairs(frontWheels) do
                        local wheel = wheels:FindFirstChild(wheelName)
                        if wheel then
                            local spring = wheel:FindFirstChild("Spring")
                            if spring then
                                spring.FreeLength = frontFreeLength
                            end
                        end
                    end
                    for _, wheelName in pairs(rearWheels) do
                        local wheel = wheels:FindFirstChild(wheelName)
                        if wheel then
                            local spring = wheel:FindFirstChild("Spring")
                            if spring then
                                spring.FreeLength = rearFreeLength
                            end
                        end
                    end
                end
            end
        end
    end
end

applyButton.MouseButton1Click:Connect(function()
    applyCambers()
    applyFreeLengths()
end)

lowRiderButton.MouseButton1Click:Connect(function()
    lowRiderActive = not lowRiderActive
    lowRiderButton.Text = lowRiderActive and "LowRider: ON" or "LowRider: OFF"
    lowRiderButton.BackgroundColor3 = lowRiderActive and Color3.fromRGB(255, 150, 0) or Color3.fromRGB(0, 150, 255)
    if lowRiderActive then
        spawn(lowRiderEffect)
    end
end)
